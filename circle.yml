machine:
  node:
    version: 5.10.1
  environment:
    CXX: g++-4.8
dependencies:
  pre:
    - openssl aes-256-cbc -d -in config-cipher -k $KEY >> configaws
    - npm install
    - add-apt-repository ppa:ubuntu-toolchain-r/test  
    - apt-get update  
    - apt-get install g++-4.8  
compile:
  override:
     - echo 'hello world'
     - echo $ABC
     - |
        CDE=${ABC}
        echo $CDE
     - 'ls -l ~/'
     - 'aws --version'
    # - 'ls -l ~/.aws/'
deployment:
  branch: dev
  commands:
       - cat ${HOME}/${CIRCLE_PROJECT_REPONAME}/configaws
       - |
          export AWS_CONFIG_FILE=${HOME}/${CIRCLE_PROJECT_REPONAME}/configaws
          echo $AWS_CONFIG_FILE
          aws --debug s3 sync ${HOME}/${CIRCLE_PROJECT_REPONAME}/dist s3://s3awscddev3 --delete --profile devprofile
test:
  override:
     - python nosetest.py
